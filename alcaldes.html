<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alcaldes de Parral ‚Äì L√≠nea de Tiempo</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Tipograf√≠a -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <style>
    :root {
      --brand: #0ea5e9;
      /* sky-500/600 */
      --brand-dark: #0284c7;
      /* sky-700 */
      --ink: #0f172a;
      /* slate-900 */
      --muted: #475569;
      /* slate-600 */
      --card: #ffffff;
      --line: #e2e8f0;
      /* slate-200 */
    }

    html,
    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial;
    }

    /* Fondo profesional (degradados suaves + textura sutil) */
    body.alcaldes-page {
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(14, 165, 233, .12), transparent 60%),
        radial-gradient(1000px 500px at 110% 10%, rgba(2, 132, 199, .10), transparent 55%),
        linear-gradient(180deg, #f8fafc 0%, #eef2f7 60%, #e9f3fb 100%);
    }

    /* Contenedor de l√≠nea de tiempo */
    .timeline {
      position: relative;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 24px;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, #c7d2fe 0, var(--brand) 35%, #bae6fd 70%, #cbd5e1 100%);
      border-radius: 2px;
      box-shadow: 0 0 0 1px #e2e8f0 inset;
    }

    .dot {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: linear-gradient(180deg, #38bdf8, #0284c7);
      border: 2px solid white;
      box-shadow: 0 0 0 4px rgba(2, 132, 199, .15);
    }

    /* Tarjetas */
    .card {
      background: var(--card);
      border: 1px solid #e5e7eb;
      border-radius: 18px;
      padding: 18px;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      box-shadow: 0 8px 22px rgba(2, 8, 23, .06);
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 34px rgba(2, 8, 23, .10);
      border-color: #cbd5e1;
    }

    /* Botones primarios/seguros */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      border-radius: 12px;
      padding: .55rem .9rem;
      font-weight: 600;
      font-size: .925rem;
      transition: all .15s ease;
    }

    .btn-primary {
      color: white;
      background: linear-gradient(180deg, var(--brand), var(--brand-dark));
      border: 1px solid rgba(2, 132, 199, .6);
      box-shadow: 0 6px 16px rgba(14, 165, 233, .28), inset 0 1px 0 rgba(255, 255, 255, .15);
    }

    .btn-primary:hover {
      filter: brightness(1.03);
      transform: translateY(-1px);
    }

    .btn-ghost {
      color: var(--ink);
      background: #f8fafc;
      border: 1px solid #e2e8f0;
    }

    .btn-ghost:hover {
      background: #eef2f7;
    }

    /* Etiquetas/chips */
    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #e2e8f0;
      font-size: 12px;
      color: #0f172a;
      background: #f8fafc;
    }

    /* Impresi√≥n √∫nicamente de la ficha */
    @media print {
      body {
        background: white !important;
      }

      #app,
      #toolbar,
      #timelineContainer,
      .no-print,
      header {
        display: none !important;
      }

      #printArea {
        display: block !important;
      }
    }
  </style>
</head>

<body class="text-slate-900 alcaldes-page">
  {% include header.html %}

  <!-- Encabezado -->
  <header id="toolbar" class="bg-white/90 backdrop-blur border-b border-slate-200">
    <div
      class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row items-start md:items-center justify-between gap-3">
      <div>
        <h1 class="text-xl md:text-2xl font-extrabold tracking-tight">Alcaldes de Parral ‚Äì L√≠nea de Tiempo</h1>
        <p class="text-sm text-slate-600">
          Compendio de autoridades comunales (√©nfasis cultural y patrimonial).
          <span class="ml-2">Actualizado: <span id="lastUpdated" class="font-semibold">{{ site.time | date: '%d/%m/%Y'
              }}</span></span>
        </p>
      </div>
      <div class="flex gap-2">
        <button id="btnExportResumen" class="btn btn-ghost no-print" title="Exportar la lista visible a PDF">
          <!-- √≠cono -->
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 3v12m0 0l4-4m-4 4l-4-4" />
            <path d="M20 21H4a2 2 0 0 1-2-2v-5" />
          </svg>
          Exportar Resumen (PDF)
        </button>
      </div>
    </div>
  </header>

  <!-- Contenido -->
  <main id="app" class="max-w-6xl mx-auto px-4 py-8">
    <!-- SIN FILTROS: s√≥lo la l√≠nea de tiempo completa -->
    <section id="timelineContainer" class="timeline space-y-6"></section>
  </main>

  <!-- √Årea de impresi√≥n (ficha individual) -->
  <section id="printArea" class="hidden"></section>

  <!-- Pie -->

  {% include footer.html %}

  <!-- Modal para la ficha completa -->
  <div id="fichaModal"
    class="fixed inset-0 z-50 hidden overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto relative">
      <button onclick="closeModal()" aria-label="Cerrar modal"
        class="absolute top-3 right-3 text-slate-500 hover:text-slate-800">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <div id="modalContent" class="p-6">
        <!-- Contenido de la ficha se carga aqu√≠ -->
      </div>
    </div>
  </div>

  <script>

    // ===========================
    // 1) Datos (editar seg√∫n necesidad)
    // ===========================
    const ALCALDES = [
      {
        id: "solar-urrutia-1912", nombre: "Domingo Antonio Solar Urrutia", periodo: "1912‚Äì1918", inicio: 1912, fin: 1918, genero: "M",
        folder: "domingo-solar-1912-1918",
        etiquetas: ["origen"],
        resumen: "Primer alcalde de Parral (1912‚Äì1918). Luego diputado por la zona; sin antecedentes formativos verificados.",
        impacto: "Consolidaci√≥n inicial de la institucionalidad municipal.",
        fuentes: ["Registro municipal y biograf√≠as parlamentarias."]
      },
      {
        id: "benavente-1938", nombre: "V√≠ctor Benavente Tapia", periodo: "1938‚Äì1939", inicio: 1938, fin: 1939, genero: "M",
        folder: "victor-benavente-1938-1939",
        etiquetas: [], resumen: "Ejerci√≥ en 1938‚Äì1939. No se hallaron antecedentes biogr√°ficos adicionales.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "urrutia-sotta-1939", nombre: "Ignacio Urrutia de la Sotta", periodo: "1939‚Äì1940", inicio: 1939, fin: 1940, genero: "M",
        folder: "ignacio-urrutia-1939-1940",
        etiquetas: [], resumen: "Contador y agricultor. Alcalde 1939‚Äì1940. Luego diputado por varios periodos.",
        impacto: "Proyecci√≥n a nivel nacional; sin registro patrimonial local espec√≠fico.", fuentes: ["Biograf√≠a parlamentaria."]
      },
      {
        id: "sepulveda-1940", nombre: "Jos√© Sep√∫lveda Cofr√©", periodo: "1940‚Äì1941", inicio: 1940, fin: 1941, genero: "M",
        folder: "jose-sepulveda-1940-1941",
        etiquetas: [], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "spoerer-1953", nombre: "Nieves Spoerer Ferrier", periodo: "1953‚Äì1956", inicio: 1953, fin: 1956, genero: "F",
        folder: "nieves-spoerer-1953-1956",
        etiquetas: ["mujer"], resumen: "Primera mujer alcaldesa de Parral (1953‚Äì1956). Liderazgo comunitario recordado.",
        impacto: "Hito de g√©nero en la administraci√≥n local.", fuentes: ["Prensa local; registros comunales."]
      },
      {
        id: "matta-1958", nombre: "Jos√© Matta Callej√≥n", periodo: "1958‚Äì1960", inicio: 1958, fin: 1960, genero: "M",
        folder: "jose-matta-1958-1960",
        etiquetas: [], resumen: "Alcalde 1958‚Äì1960. Dirigente local; una escuela lleva su nombre.",
        impacto: "Vinculaci√≥n comunitaria y educativa.", fuentes: ["Archivo escolar local."]
      },
      {
        id: "morales-1960", nombre: "Joaqu√≠n Morales Rodr√≠guez", periodo: "1960‚Äì1961", inicio: 1960, fin: 1961, genero: "M",
        folder: "joaquin-morales-1960-1961",
        etiquetas: [], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "aqueveque-1961", nombre: "Carolina Aqueveque Castro", periodo: "1961‚Äì1962", inicio: 1961, fin: 1962, genero: "F",
        folder: "carolina-aqueveque-1961-1962",
        etiquetas: ["mujer"], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "belmar-1962", nombre: "Guillermo Belmar Hern√°ndez", periodo: "1962‚Äì1963", inicio: 1962, fin: 1963, genero: "M",
        folder: "guillermo-belmar-1962-1963",
        etiquetas: [], resumen: "Dirigente local; posteriormente alcalde 1992‚Äì1996.",
        impacto: "Gestiones en periodos de transici√≥n pol√≠tica.", fuentes: ["Registros municipales."]
      },
      {
        id: "spoerer-1963", nombre: "Nieves Spoerer Ferrier", periodo: "1963‚Äì1964", inicio: 1963, fin: 1964, genero: "F",
        folder: "nieves-spoerer-1953-1956",
        etiquetas: ["mujer"], resumen: "Reelegida por breve periodo; liderazgo c√≠vico.",
        impacto: "Representaci√≥n femenina sostenida.", fuentes: ["Registros municipales."]
      },
      {
        id: "albornoz-1964", nombre: "Manuel Albornoz Hern√°ndez", periodo: "1964‚Äì1967", inicio: 1964, fin: 1967, genero: "M",
        folder: "manuel-albornoz-1964-1967",
        etiquetas: [], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "astorga-1967", nombre: "Enrique Astorga Barriga", periodo: "1967‚Äì1971", inicio: 1967, fin: 1971, genero: "M",
        folder: "enrique-astorga-1967-1971",
        etiquetas: [], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "zorrilla-1971", nombre: "Enrique Zorrilla Concha", periodo: "1971‚Äì1972", inicio: 1971, fin: 1972, genero: "M",
        folder: "enrique-zorrilla-1971-1972",
        etiquetas: [], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "urrutia-silva-1972", nombre: "Arturo Urrutia Silva", periodo: "1972‚Äì1973", inicio: 1972, fin: 1973, genero: "M",
        folder: "arturo-urrutia-1972-1973",
        etiquetas: [], resumen: "Sin antecedentes biogr√°ficos documentados.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "spoerer-1973", nombre: "Nieves Spoerer Ferrier", periodo: "1973", inicio: 1973, fin: 1973, genero: "F",
        folder: "nieves-spoerer-1953-1956",
        etiquetas: ["mujer"], resumen: "Gesti√≥n muy breve en 1973.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "fuentes-1973", nombre: "Enrique Fuentes V√°squez", periodo: "1973‚Äì1975", inicio: 1973, fin: 1975, genero: "M",
        folder: "enrique-fuentes-1973-1975",
        etiquetas: [], resumen: "Alcalde durante r√©gimen militar. Sin m√°s antecedentes.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "rojas-1975", nombre: "Eliana Rojas de Baladr√≥n", periodo: "1975‚Äì1977", inicio: 1975, fin: 1977, genero: "F",
        folder: "eliana-rojas-1975-1977",
        etiquetas: ["mujer"], resumen: "Alcaldesa designada. Sin m√°s antecedentes.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "opazo-1978", nombre: "Luis Humberto Opazo Rodr√≠guez", periodo: "1978‚Äì1981", inicio: 1978, fin: 1981, genero: "M",
        folder: "luis-opazo-1978-1981",
        etiquetas: [], resumen: "Militar designado. Sin m√°s antecedentes.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "villablanca-1981", nombre: "Ernesto Villablanca Hern√°ndez", periodo: "1981‚Äì1984", inicio: 1981, fin: 1984, genero: "M",
        folder: "ernesto-villablanca-1981-1984",
        etiquetas: [], resumen: "Renuncia en octubre de 1984. Sin m√°s antecedentes.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "gonzalez-1984", nombre: "Gladys del Carmen Gonz√°lez Espinoza", periodo: "1984‚Äì1986", inicio: 1984, fin: 1986, genero: "F",
        folder: "gladys-gonzalez-1984-1986",
        etiquetas: ["mujer"], resumen: "Interina 1984‚Äì1986. Sin m√°s antecedentes.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "rodriguez-1986", nombre: "Alfonso Rodr√≠guez del R√≠o", periodo: "1986‚Äì1988", inicio: 1986, fin: 1988, genero: "M",
        folder: "alfonso-rodriguez-1986-1988",
        etiquetas: [], resumen: "Interino previo a procesos electorales. Sin m√°s antecedentes.",
        impacto: "No documentado.", fuentes: ["Listado comunal."]
      },
      {
        id: "bravo-1988", nombre: "Claudio Bravo Araya", periodo: "1988‚Äì1992", inicio: 1988, fin: 1992, genero: "M",
        folder: "claudio-bravo-1988-2004",
        etiquetas: [], resumen: "Figuraci√≥n en la transici√≥n democr√°tica; luego nuevo periodo 1996‚Äì2004.",
        impacto: "Reorganizaci√≥n municipal post-dictadura (sin proyectos patrimoniales especificados).",
        fuentes: ["Registros municipales."]
      },
      {
        id: "belmar-1992", nombre: "Guillermo Belmar Hern√°ndez", periodo: "1992‚Äì1996", inicio: 1992, fin: 1996, genero: "M",
        folder: "guillermo-belmar-1992-1996",
        etiquetas: [], resumen: "Alcalde electo en la restauraci√≥n democr√°tica.",
        impacto: "No documentado.", fuentes: ["Registros municipales."]
      },
      {
        id: "bravo-1996", nombre: "Claudio Bravo Araya", periodo: "1996‚Äì2004", inicio: 1996, fin: 2004, genero: "M",
        folder: "claudio-bravo-1988-2004",
        etiquetas: [], resumen: "Largo periodo hasta 2004.",
        impacto: "No documentado.", fuentes: ["Registros municipales."]
      },
      {
        id: "urrutia-2004", nombre: "Israel Urrutia Escobar", periodo: "2004‚Äì2012", inicio: 2004, fin: 2012, genero: "M",
        folder: "israel-urrutia-2004-2012",
        etiquetas: ["impacto"], resumen: "Impuls√≥ Teatro Municipal (2011) y remodelaci√≥n de Biblioteca P√∫blica ‚ÄòNeftal√≠ Reyes Basoalto‚Äô (2012).",
        impacto: "Infraestructura cultural clave para la comuna.", fuentes: ["Prensa institucional; Biblioredes."]
      },
      {
        id: "retamal-2012", nombre: "Paula Retamal Urrutia", periodo: "2012‚Äì2024", inicio: 2012, fin: 2024, genero: "F",
        folder: "paula-retamal-2012-2024",
        etiquetas: ["mujer"], resumen: "Profesora; programas sociales, mejoramiento de espacios p√∫blicos y barrios.",
        impacto: "Continuidad de festividades y fortalecimiento social.",
        fuentes: ["Prensa regional."]
      },
      {
        id: "ojeda-2024", nombre: "Patricio Ojeda Alarc√≥n", periodo: "2024‚Äìpresente", inicio: 2024, fin: 2025, genero: "M",
        folder: "patricio-ojeda-2024-presente",
        etiquetas: [], resumen: "Ingeniero; gesti√≥n en curso desde dic. 2024.",
        impacto: "A la fecha, sin hitos patrimoniales publicados.", fuentes: ["Municipalidad y prensa local."]
      },
    ].sort((a, b) => a.inicio - b.inicio);

    // ===========================
    // 2) Render de la l√≠nea de tiempo (sin filtros)
    // ===========================
    function renderTimeline(list) {
      const container = document.getElementById('timelineContainer');
      container.innerHTML = '';

      list.forEach(item => {
        const row = document.createElement('div');
        row.className = 'relative pl-14';
        row.innerHTML = `
          <div class="absolute left-1 top-2">
            <span class="dot"></span>
          </div>
          <article class="card">
            <div class="flex flex-wrap items-start gap-3 justify-between">
              <div>
                <h3 class="text-lg font-extrabold text-slate-900">${item.nombre}</h3>
                <p class="text-sm text-slate-600">${item.periodo}</p>
              </div>
              <div class="flex flex-wrap gap-2">
                ${item.genero === 'F' ? `<span class="chip">Alcaldesa</span>` : ''}
                ${item.etiquetas?.includes('impacto') ? `<span class="chip">Impacto patrimonial</span>` : ''}
                ${item.inicio <= 1918 ? `<span class="chip">Or√≠genes</span>` : ''}
                ${item.inicio >= 2004 ? `<span class="chip">Reciente</span>` : ''}
              </div>
            </div>

            <p class="mt-3 text-slate-800">${item.resumen}</p>
            <div class="mt-2 text-sm text-slate-600">
              <strong>Impacto:</strong> ${item.impacto}
            </div>
            <details class="mt-3 bg-slate-50/70 border border-slate-200 rounded-lg px-3 py-2">
              <summary class="text-sm text-slate-700 cursor-pointer">Fuentes y notas</summary>
              <ul class="list-disc ml-5 text-sm text-slate-700">
                ${item.fuentes.map(f => `<li>${f}</li>`).join("")}
              </ul>
            </details>

            <div class="mt-4 flex flex-wrap gap-2">
              <button class="btn btn-primary" onclick="verFicha('${item.id}')">
                <!-- √≠cono ojo -->
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/><circle cx="12" cy="12" r="3"/>
                </svg>
                Ver ficha completa
              </button>
              <button class="btn btn-ghost" onclick="descargarFicha('${item.id}')" title="Guardar PDF">
                <!-- √≠cono imprimir -->
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M6 9V2h12v7"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><path d="M6 14h12v8H6z"/>
                </svg>
                Descargar ficha (PDF)
              </button>
            </div>
          </article>
        `;
        container.appendChild(row);
      });
    }

    // ===========================
    // 3) Fichas (ver/descargar)
    // ===========================

    // Funci√≥n para construir el HTML de la ficha (modal y PDF)
    function buildFichaHTML(h, isModal = false) {
      // Estructura para el modal (m√°s rica visualmente)
      // Intentamos cargar una imagen si existe (Asumimos nombre portada.webp o portada.jpg en la carpeta)
      // Como no sabemos si existe, ponemos un placeholder visual si falla o mejor a√∫n, un contenedor.

      const folderPath = `images/alcaldes/${h.folder}`;
      // Placeholder imagen generica si no hay imagen espec√≠fica
      const defaultImg = "https://via.placeholder.com/600x400?text=Sin+Imagen+Disponible";

      // Nota: En un entorno est√°tico real, verificar existencia de archivo es dif√≠cil sin build step.
      // Usaremos un truco de 'onerror' para la imagen.

      const updatedDate = document.getElementById('lastUpdated').textContent;

      let mediaSection = '';
      if (isModal) {
        mediaSection = `
            <div class="mb-6 bg-slate-100 rounded-lg overflow-hidden border border-slate-200">
                <div class="aspect-w-16 aspect-h-9 bg-slate-200 flex items-center justify-center text-slate-400">
                    <!-- Intentar cargar imagen principal -->
                    <img src="${folderPath}/portada.webp"
                         onerror="this.onerror=null; this.src='images/placeholder-alcalde.webp'; this.parentElement.innerHTML='<span class=\\'p-8 text-center\\'>üìÅ Carpeta de medios vac√≠a<br><span class=\\'text-xs\\'>${folderPath}</span></span>'"
                         class="object-cover w-full h-full" alt="Imagen de ${h.nombre}">
                </div>
                <div class="p-3 text-xs text-center text-slate-500 bg-slate-50">
                    Galer√≠a multimedia (Im√°genes y Videos) - Se visualizar√°n aqu√≠ los archivos de la carpeta: <strong>${h.folder}</strong>
                </div>
            </div>
          `;
      }

      return `
        <div style="${isModal ? '' : 'max-width:780px;margin:0 auto;padding:32px;'} font-family: Inter, system-ui; color:#0f172a;">
          <div style="display:flex;justify-content:space-between;align-items:flex-start; gap:16px;">
            <div>
              <h1 style="font-size:22px; font-weight:800; margin:0; line-height: 1.2;">${h.nombre}</h1>
              <p style="margin:4px 0 0; color:#334155; font-size: 1.1rem; font-weight: 500;">Per√≠odo: ${h.periodo}</p>
            </div>
            <div style="text-align:right; color:#64748b; font-size:12px;">
              Ficha patrimonial ¬∑ Parral <br/> Generado: ${updatedDate}
            </div>
          </div>

          <hr style="margin:16px 0; border:none; border-top:1px solid #e2e8f0;" />

          ${mediaSection}

          <div class="grid md:grid-cols-1 gap-6">
              <div>
                  <h3 style="font-size:1.1rem; font-weight:700; color:#0ea5e9; margin-bottom:0.5rem;">Biograf√≠a y Resumen</h3>
                  <p style="margin:0 0 12px; line-height: 1.6;">${h.resumen}</p>

                  <h3 style="font-size:1.1rem; font-weight:700; color:#0ea5e9; margin-bottom:0.5rem; margin-top: 1.5rem;">Impacto y Legado</h3>
                  <p style="margin:0 0 12px; line-height: 1.6;">${h.impacto}</p>

                  <div style="margin:24px 0; background: #f8fafc; padding: 1rem; border-radius: 8px; border: 1px solid #e2e8f0;">
                    <strong style="color: #475569;">Fuentes documentales:</strong>
                    <ul style="margin:6px 0 0 18px; color:#475569;">
                      ${h.fuentes.map(f => `<li>${f}</li>`).join("")}
                    </ul>
                  </div>
              </div>
          </div>

          <div style="margin-top:18px; font-size:12px; color:#64748b; border-top: 1px solid #eee; padding-top: 10px;">
            Uso educativo y de rescate cultural. Si cuenta con antecedentes verificables adicionales, por favor remitir para su incorporaci√≥n en el archivo <em>${h.folder}</em>.
          </div>
        </div>
      `;
    }

    function verFicha(id) {
      const h = ALCALDES.find(x => x.id === id);
      if (!h) return;

      const modal = document.getElementById('fichaModal');
      const content = document.getElementById('modalContent');

      // Usar true para isModal para incluir placeholders de multimedia
      content.innerHTML = buildFichaHTML(h, true);

      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden'; // Evitar scroll de fondo
    }

    function closeModal() {
      const modal = document.getElementById('fichaModal');
      modal.classList.add('hidden');
      // Limpiar contenido para detener videos si los hubiera en el futuro
      setTimeout(() => { document.getElementById('modalContent').innerHTML = ''; }, 200);
      document.body.style.overflow = '';
    }

    // Close on click outside
    document.getElementById('fichaModal').addEventListener('click', function (e) {
      if (e.target === this) closeModal(); // Click en el overlay
    });

    // Close on Escape key
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') closeModal();
    });

    function descargarFicha(id) {
      const h = ALCALDES.find(x => x.id === id);
      if (!h) return;
      const w = window.open('', '_blank', 'width=840,height=1000');
      w.document.write(`
        <html><head>
          <meta charset="utf-8"/>
          <title>Ficha ‚Äì ${h.nombre}</title>
          <style>@page { size: A4; margin: 16mm; } body{ background:white; font-family: sans-serif; }</style>
        </head><body>
          ${buildFichaHTML(h, false)}
          <script>window.onload = () => { window.print(); setTimeout(()=>window.close(), 500); }<\/script>
        </body></html>
      `);
      w.document.close();
    }

    // Exportar resumen de la lista (sin botones de acci√≥n)
    function exportarResumen() {
      const container = document.getElementById('timelineContainer').cloneNode(true);
      // Eliminar botones de acci√≥n y detalles
      container.querySelectorAll('button').forEach(b => b.remove());
      container.querySelectorAll('details').forEach(d => d.setAttribute('open', 'true'));

      const updatedDate = document.getElementById('lastUpdated').textContent;

      const w = window.open('', '_blank', 'width=900,height=1200');
      w.document.write(`
        <html><head>
          <meta charset="utf-8"/>
          <title>Resumen ‚Äì Alcaldes de Parral</title>
          <style>
            @page { size: A4; margin: 14mm; }
            body { font-family: Inter, system-ui; color:#0f172a; }
            h1{ font-size:20px; margin:0 0 6px; font-weight:800; }
            h2{ font-size:14px; color:#334155; margin:0 0 16px; }
            .relative{ page-break-inside: avoid; }
            .card{ border:1px solid #e5e7eb; border-radius:12px; padding:12px; margin:10px 0; }
            .dot{ display:none; } /* ocultamos puntos en PDF de resumen */
            .chip { display:inline-block; padding:2px 6px; border:1px solid #ccc; font-size:10px; border-radius:4px; margin-right:4px; }
            ul { margin-top: 5px; margin-bottom: 5px; }
            summary { list-style: none; font-weight: bold; margin-bottom: 4px; }
          </style>
        </head><body>
          <h1>Alcaldes de Parral ‚Äì Resumen</h1>
          <h2>Generado: ${updatedDate}</h2>
          ${container.innerHTML}
          <script>window.onload = ()=>{ window.print(); setTimeout(()=>window.close(), 500); }<\/script>
        </body></html>
      `);
      w.document.close();
    }

    // ===========================
    // 4) Inicio
    // ===========================
    function init() {
      renderTimeline(ALCALDES);
      const btnExport = document.getElementById('btnExportResumen');
      if (btnExport) btnExport.addEventListener('click', exportarResumen);
    }
    document.addEventListener('DOMContentLoaded', init);

  </script>
</body>

</html>
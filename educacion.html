<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Difusi√≥n Cultural y Pedag√≥gica ‚Äì Archivos en Movimiento</title>
    <meta name="description"
        content="Recursos educativos, gu√≠as de trabajo y l√°minas para colorear sobre el patrimonio de Parral. Ideal para profesores y estudiantes.">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Educaci√≥n Patrimonial en Parral | Archivos en Movimiento">
    <meta property="og:description"
        content="Accede a gu√≠as, infograf√≠as y material interactivo para aprender sobre nuestra historia local.">
    <meta property="og:image" content="https://fotos-parral.cl/optimized/images/epoca-portada.webp">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Merriweather:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- jsPDF para generaci√≥n de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
    {% include header.html %}

    <section class="hero"
        style="background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%); padding: 4rem 1rem 3rem; min-height: auto;">
        <div class="container" style="text-align: center;">
            <h2 class="hero-title-dual">
                <span class="title-white">Difusi√≥n Cultural y</span>
                <span class="title-gold">Pedag√≥gica</span>
            </h2>
            <p style="color: rgba(255,255,255,0.7); margin-top: 1rem;">Recursos para aprender y ense√±ar sobre nuestro
                patrimonio.</p>
        </div>
    </section>

    <section class="container" style="padding: 4rem 1rem;">
        <div class="grid-galeria">
            <div id="cardVideos" class="card-testimonio" style="cursor: pointer;">
                <h3>Videos y Presentaciones</h3>
                <p>Material audiovisual para clases y charlas.</p>
                <div class="galeria-placeholder" style="height: 150px; margin-top: 1rem;">üéûÔ∏è</div>
            </div>
            <div class="card-testimonio">
                <h3>Gu√≠as de Trabajo</h3>
                <p>Actividades descargables para estudiantes.</p>
                <div class="galeria-placeholder" style="height: 150px; margin-top: 1rem;">üìù</div>
            </div>
            <div id="cardColorear" class="card-testimonio" style="cursor: pointer;">
                <h3>Para Colorear</h3>
                <p>L√°minas patrimoniales para los m√°s peque√±os.</p>
                <div class="galeria-placeholder" style="height: 150px; margin-top: 1rem;">üé®</div>
            </div>
            <a href="infografias.html" style="text-decoration: none; display: block; color: inherit;">
                <div class="card-testimonio" style="height: 100%;">
                    <h3>Infograf√≠as</h3>
                    <p>Material visual informativo y educativo.</p>
                    <div class="galeria-placeholder" style="height: 150px; margin-top: 1rem;">üìä</div>
                </div>
            </a>
        </div>
    </section>

    <!-- Nueva Secci√≥n Deportistas -->
    <section class="container" style="padding: 2rem 1rem 4rem 1rem; border-top: 1px solid #ddd;">
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 style="font-family: 'Merriweather', serif; color: var(--primary-color);">Deportistas Destacados</h2>
            <p>Orgullo Parralino: Historias de esfuerzo y triunfo</p>
        </div>

        <div class="controls-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar por nombre, deporte o logro..."
                    oninput="applyFilters()">
            </div>
            <div class="filter-box">
                <select id="nivelFilter" onchange="applyFilters()" aria-label="Filtrar por nivel">
                    <option value="">Todos los Niveles</option>
                    <option value="Nacional">Nacional</option>
                    <option value="Regional">Regional</option>
                    <option value="Nacional / Escolar">Nacional / Escolar</option>
                    <option value="Regional / Nacional">Regional / Nacional</option>
                </select>
            </div>
        </div>

        <div id="cardsContainer" class="grid-deportistas">
            <!-- Las tarjetas se generar√°n aqu√≠ con JS -->
            <div class="text-center" style="grid-column: 1/-1; padding: 4rem;">
                <p>Cargando deportistas...</p>
            </div>

        </div>
    </section>

    {% include footer.html %}

    <!-- Modal Para Colorear -->
    <div id="colorearModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('colorearModal')">&times;</span>
            <div class="modal-header">
                <h2>L√°minas para Colorear</h2>
                <p>Descarga estas ilustraciones inspiradas en nuestro patrimonio y dale vida con tus colores.</p>
            </div>
            <div class="modal-grid">
                <!-- Colorear 1 -->
                <div class="colorear-item">
                    <div class="colorear-img-container">
                        <img src="optimized/images/colorear-1_thumb.webp" alt="L√°mina para colorear 1"
                            class="colorear-img" loading="lazy" width="400" height="280">
                    </div>
                    <a href="optimized/images/colorear-1.webp" download="Colorear_Parral_1.webp"
                        class="btn-download-sm">Descargar</a>
                </div>
                <!-- Colorear 2 -->
                <div class="colorear-item">
                    <div class="colorear-img-container">
                        <img src="optimized/images/colorear-2_thumb.webp" alt="L√°mina para colorear 2"
                            class="colorear-img" loading="lazy" width="400" height="280">
                    </div>
                    <a href="optimized/images/colorear-2.webp" download="Colorear_Parral_2.webp"
                        class="btn-download-sm">Descargar</a>
                </div>
                <!-- Colorear 3 -->
                <div class="colorear-item">
                    <div class="colorear-img-container">
                        <img src="optimized/images/colorear-3_thumb.webp" alt="L√°mina para colorear 3"
                            class="colorear-img" loading="lazy" width="400" height="280">
                    </div>
                    <a href="optimized/images/colorear-3.webp" download="Colorear_Parral_3.webp"
                        class="btn-download-sm">Descargar</a>
                </div>
                <!-- Colorear 4 -->
                <div class="colorear-item">
                    <div class="colorear-img-container">
                        <img src="optimized/images/colorear-4_thumb.webp" alt="L√°mina para colorear 4"
                            class="colorear-img" loading="lazy" width="400" height="280">
                    </div>
                    <a href="optimized/images/colorear-4.webp" download="Colorear_Parral_4.webp"
                        class="btn-download-sm">Descargar</a>
                </div>
                <!-- Colorear 5 -->
                <div class="colorear-item">
                    <div class="colorear-img-container">
                        <img src="optimized/images/colorear-5_thumb.webp" alt="L√°mina para colorear 5"
                            class="colorear-img" loading="lazy" width="400" height="280">
                    </div>
                    <a href="optimized/images/colorear-5.webp" download="Colorear_Parral_5.webp"
                        class="btn-download-sm">Descargar</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Videos y Presentaciones -->
    <div id="videosModal" class="modal">
        <div class="modal-content" style="max-width: 1100px;">
            <span class="close-modal" onclick="closeModal('videosModal')">&times;</span>
            <div class="modal-header">
                <h2>üé¨ Videos y Presentaciones</h2>
                <p>Material audiovisual y presentaciones educativas para clases y charlas</p>
            </div>

            <!-- Videos Section -->
            <h3 style="font-family: 'Merriweather', serif; color: var(--primary-color); margin: 1.5rem 0 1rem;">üìπ
                Videos Educativos</h3>
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; border-radius: 8px; overflow: hidden;">
                    <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        src="https://www.youtube.com/embed/WRwCIJ5ftR0" title="Video 1" allowfullscreen></iframe>
                </div>
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; border-radius: 8px; overflow: hidden;">
                    <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        src="https://www.youtube.com/embed/ME4gNYA-Kao" title="Video 2" allowfullscreen></iframe>
                </div>
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; border-radius: 8px; overflow: hidden;">
                    <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        src="https://www.youtube.com/embed/0Kj7R3N5ZeM" title="Video 3" allowfullscreen></iframe>
                </div>
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; border-radius: 8px; overflow: hidden;">
                    <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        src="https://www.youtube.com/embed/8EYDxHzEG_Q" title="Video 4" allowfullscreen></iframe>
                </div>
                <div
                    style="position: relative; padding-bottom: 56.25%; height: 0; border-radius: 8px; overflow: hidden;">
                    <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        src="https://www.youtube.com/embed/gREfHkWfFO4" title="Video 5" allowfullscreen></iframe>
                </div>
            </div>

            <!-- Presentaciones Section -->
            <h3 style="font-family: 'Merriweather', serif; color: var(--primary-color); margin: 1.5rem 0 1rem;">üìö
                Presentaciones PDF</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                <!-- PDF 1 -->
                <div style="background: #f8f8f8; border-radius: 12px; padding: 1.5rem; text-align: center;">
                    <span style="font-size: 3rem;">üìú</span>
                    <h4 style="margin: 0.5rem 0; font-family: 'Merriweather', serif;">Fundaci√≥n de Parral</h4>
                    <p style="color: #666; font-size: 0.85rem; margin-bottom: 1rem;">Historia: 1541-1795</p>
                    <div style="display: flex; gap: 0.5rem;">
                        <a href="recursos/presentaciones/Chile_Parral_Foundation_History_1541-1795 pdf.pdf"
                            target="_blank"
                            style="flex: 1; padding: 0.5rem; background: #c9a961; color: #1a1510; text-decoration: none; border-radius: 6px; font-weight: 600;">üëÅÔ∏è
                            Ver</a>
                        <a href="recursos/presentaciones/Chile_Parral_Foundation_History_1541-1795 pdf.pdf" download
                            style="flex: 1; padding: 0.5rem; background: #2d3748; color: #fff; text-decoration: none; border-radius: 6px; font-weight: 600;">‚¨áÔ∏è</a>
                    </div>
                </div>
                <!-- PDF 2 -->
                <div style="background: #f8f8f8; border-radius: 12px; padding: 1.5rem; text-align: center;">
                    <span style="font-size: 3rem;">üèõÔ∏è</span>
                    <h4 style="margin: 0.5rem 0; font-family: 'Merriweather', serif;">O'Higgins Visionario</h4>
                    <p style="color: #666; font-size: 0.85rem; margin-bottom: 1rem;">Constructor de Chile</p>
                    <div style="display: flex; gap: 0.5rem;">
                        <a href="recursos/presentaciones/O_Higgins_VICIONARIO Y CONSTRUCTOR.pdf" target="_blank"
                            style="flex: 1; padding: 0.5rem; background: #c9a961; color: #1a1510; text-decoration: none; border-radius: 6px; font-weight: 600;">üëÅÔ∏è
                            Ver</a>
                        <a href="recursos/presentaciones/O_Higgins_VICIONARIO Y CONSTRUCTOR.pdf" download
                            style="flex: 1; padding: 0.5rem; background: #2d3748; color: #fff; text-decoration: none; border-radius: 6px; font-weight: 600;">‚¨áÔ∏è</a>
                    </div>
                </div>
                <!-- PDF 3 -->
                <div style="background: #f8f8f8; border-radius: 12px; padding: 1.5rem; text-align: center;">
                    <span style="font-size: 3rem;">üåÑ</span>
                    <h4 style="margin: 0.5rem 0; font-family: 'Merriweather', serif;">Parral: Tierra de Contrastes</h4>
                    <p style="color: #666; font-size: 0.85rem; margin-bottom: 1rem;">Geograf√≠a y cultura</p>
                    <div style="display: flex; gap: 0.5rem;">
                        <a href="recursos/presentaciones/Parral_Tierra_de_Contrastes.pdf" target="_blank"
                            style="flex: 1; padding: 0.5rem; background: #c9a961; color: #1a1510; text-decoration: none; border-radius: 6px; font-weight: 600;">üëÅÔ∏è
                            Ver</a>
                        <a href="recursos/presentaciones/Parral_Tierra_de_Contrastes.pdf" download
                            style="flex: 1; padding: 0.5rem; background: #2d3748; color: #fff; text-decoration: none; border-radius: 6px; font-weight: 600;">‚¨áÔ∏è</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include footer.html %}

    <script>
        // ==========================================
        // MODAL SYSTEM
        // ==========================================
        function openModal(id) {
            const modal = document.getElementById(id);
            if (modal) {
                modal.style.display = "block";
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
                document.body.style.overflow = 'hidden'; // Prevent scrolling background
            }
        }

        function closeModal(id) {
            const modal = document.getElementById(id);
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = "none";
                    document.body.style.overflow = ''; // Restore scrolling
                }, 300);
            }
        }

        // Close modal when clicking outside
        window.onclick = function (event) {
            if (event.target.classList.contains('modal')) {
                closeModal(event.target.id);
            }
        }

        // ==========================================
        // BASE DE DATOS DE DEPORTISTAS
        // ==========================================
        const DEPORTISTAS_DATA = [
            {
                id: "pgarces",
                nombre: "Paulo Andr√©s Garc√©s Contreras",
                deporte: "F√∫tbol (Arquero)",
                logros: "Internacional con la selecci√≥n chilena (2011-2015). Ganador Copa Am√©rica 2015. Trayectoria en clubes como Universidad Cat√≥lica, Colo-Colo y Universidad de Chile.",
                nivel: "Nacional",
                vinculo: "Nacido en Parral",
                fuente: "Medios deportivos nacionales / registros federativos"
            },
            {
                id: "rvallejos",
                nombre: "Rub√©n Vallejos Gajardo",
                deporte: "F√∫tbol (Delantero)",
                logros: "Campe√≥n Copa Chile 1994 con Colo-Colo. Goleador en torneos nacionales en la d√©cada de 1990.",
                nivel: "Nacional",
                vinculo: "Nacido en Parral",
                fuente: "Archivos ANFP / Prensa hist√≥rica"
            },
            {
                id: "lfuentes",
                nombre: "Luis Fuentes Rodr√≠guez",
                deporte: "F√∫tbol (Defensa)",
                logros: "Seleccionado nacional. Destacada trayectoria en Cobreloa (Campe√≥n 2003, 2004). Jugador del a√±o en Chile 2004.",
                nivel: "Nacional",
                vinculo: "Nacido en Petorca, vinculado a la zona por familia y trayectoria regional inicial.",
                fuente: "Registros ANFP"
            },
            {
                id: "hfuentes",
                nombre: "H√©ctor Fuentes",
                deporte: "F√∫tbol (Defensa)",
                logros: "Jugador hist√≥rico de Rangers de Talca y otros clubes de primera divisi√≥n.",
                nivel: "Regional / Nacional",
                vinculo: "Hermano de Luis Fuentes, vinculado a la zona.",
                fuente: "Prensa regional"
            },
            {
                id: "italo",
                nombre: "√çtalo D√≠az",
                deporte: "F√∫tbol (Defensa)",
                logros: "Seleccionado nacional. Jug√≥ en Cobreloa, Audax Italiano y otros. Entrenador.",
                nivel: "Nacional",
                vinculo: "V√≠nculos familiares en la zona del Maule Sur.",
                fuente: "Bases de datos f√∫tbol chileno"
            },
            {
                id: "basket_fem",
                nombre: "Selecci√≥n Femenina de B√°squetbol Parral",
                deporte: "B√°squetbol",
                logros: "M√∫ltiples campeonatos regionales y destacadas participaciones nacionales en series menores.",
                nivel: "Regional / Nacional",
                vinculo: "Representantes de la comuna",
                fuente: "Asociaci√≥n de B√°squetbol de Parral"
            },
            {
                id: "rodeo",
                nombre: "Club de Rodeo Chileno de Parral",
                deporte: "Rodeo",
                logros: "Participantes habituales en el Champion de Chile (Rancagua). Cuna de grandes jinetes.",
                nivel: "Nacional",
                vinculo: "Tradici√≥n local",
                fuente: "Federaci√≥n del Rodeo Chileno"
            }
        ];

        // ==========================================
        // L√ìGICA DE LA P√ÅGINA
        // ==========================================

        function renderCards(list) {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';

            if (list.length === 0) {
                container.innerHTML = '<div class="text-center" style="grid-column: 1/-1; padding: 2rem;"><p>No se encontraron resultados.</p></div>';
                return;
            }

            // Ordenar alfab√©ticamente
            list.sort((a, b) => a.nombre.localeCompare(b.nombre));

            list.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card-deportista';
                card.innerHTML = `
                    <div class="card-header">
                        <h3>${item.nombre}</h3>
                        <span class="badge">${item.nivel}</span>
                    </div>
                    <div class="card-body">
                        <div class="card-meta">
                            <strong>${item.deporte}</strong>
                            <span>‚Ä¢</span>
                            <span>${item.vinculo}</span>
                        </div>
                        <p class="card-logros">${item.logros}</p>
                    </div>
                    <div class="card-footer" style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 0.8rem; color: #718096;">Fuente: ${item.fuente}</span>
                        <button onclick="downloadPDF('${item.id}')" class="btn-card" style="font-size: 0.8rem; cursor: pointer;">
                            Descargar Ficha
                        </button>
                    </div>
                    `;
                container.appendChild(card);
            });
        }

        function applyFilters() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const level = document.getElementById('nivelFilter').value;

            const filtered = DEPORTISTAS_DATA.filter(item => {
                const matchesSearch = (item.nombre + ' ' + item.deporte + ' ' + item.logros).toLowerCase().includes(query);
                const matchesLevel = level ? item.nivel === level : true;
                return matchesSearch && matchesLevel;
            });

            renderCards(filtered);
        }

        async function downloadPDF(id) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            const item = DEPORTISTAS_DATA.find(d => d.id === id);
            if (!item) return;

            // Configuraci√≥n de fuente y colores
            doc.setFont("helvetica", "bold");
            doc.setFontSize(22);
            doc.setTextColor(93, 64, 55); // --primary-color

            // T√≠tulo
            const splitTitle = doc.splitTextToSize(item.nombre, 180);
            doc.text(splitTitle, 15, 25);

            // L√≠nea separadora
            doc.setLineWidth(0.5);
            doc.setDrawColor(200, 200, 200);
            let yPos = 25 + (splitTitle.length * 10);
            doc.line(15, yPos, 195, yPos);
            yPos += 10;

            // Contenido
            doc.setFont("helvetica", "normal");
            doc.setFontSize(12);
            doc.setTextColor(50, 50, 50);

            const details = [
                { label: "Deporte", value: item.deporte },
                { label: "Nivel", value: item.nivel },
                { label: "V√≠nculo con Parral", value: item.vinculo },
                { label: "Logros", value: item.logros },
                { label: "Fuente", value: item.fuente }
            ];

            details.forEach(det => {
                doc.setFont("helvetica", "bold");
                doc.text(`${det.label}:`, 15, yPos);

                doc.setFont("helvetica", "normal");
                const splitValue = doc.splitTextToSize(det.value, 130);
                doc.text(splitValue, 60, yPos);

                yPos += (splitValue.length * 7) + 5;
            });

            // Footer
            doc.setFontSize(10);
            doc.setTextColor(150, 150, 150);
            doc.text("Archivos en Movimiento - Patrimonio Vivo de Parral", 15, 280);

            // Descargar
            doc.save(`Ficha_${item.nombre.replace(/\s+/g, '_')}.pdf`);
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            renderCards(DEPORTISTAS_DATA);

            // Event listener para el modal de colorear
            const cardColorear = document.getElementById('cardColorear');
            if (cardColorear) {
                cardColorear.addEventListener('click', function () {
                    openModal('colorearModal');
                });
            }

            // Event listener para el modal de videos y presentaciones
            const cardVideos = document.getElementById('cardVideos');
            if (cardVideos) {
                cardVideos.addEventListener('click', function () {
                    openModal('videosModal');
                });
            }
        });

        // Mobile Menu Toggle
        document.querySelector('.mobile-menu-btn').addEventListener('click', function () {
            document.querySelector('.main-nav').classList.toggle('show');
        });
    </script>
</body>

</html>